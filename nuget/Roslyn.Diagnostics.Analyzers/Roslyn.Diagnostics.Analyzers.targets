<?xml version="1.0" encoding="utf-8" ?>
<Project>

  <PropertyGroup>
    <GenerateThreadDependencyAttributes Condition="'$(GenerateThreadDependencyAttributes)' == ''">true</GenerateThreadDependencyAttributes>
    <ThreadDependencyAttributeBasePath Condition="'$(ThreadDependencyAttributeBasePath)' == ''">$(MSBuildThisFileDirectory)</ThreadDependencyAttributeBasePath>
    <NoMainThreadDependencyAttributePath>$(ThreadDependencyAttributeBasePath)NoMainThreadDependencyAttribute$(DefaultLanguageSourceExtension)</NoMainThreadDependencyAttributePath>
    <AsyncEntryAttributePath>$(ThreadDependencyAttributeBasePath)AsyncEntryAttribute$(DefaultLanguageSourceExtension)</AsyncEntryAttributePath>
  </PropertyGroup>

  <ItemGroup Condition="'$(GenerateThreadDependencyAttributes)' == 'true' and Exists($(NoMainThreadDependencyAttributePath))">
    <Compile Include="$(NoMainThreadDependencyAttributePath)" Visible="false" />

    <!-- Make sure the source file is embedded in PDB to support Source Link -->
    <EmbeddedFiles Condition="'$(DebugType)' != 'none'" Include="$(NoMainThreadDependencyAttributePath)" />
  </ItemGroup>

  <ItemGroup Condition="'$(GenerateThreadDependencyAttributes)' == 'true' and Exists($(AsyncEntryAttributePath))">
    <Compile Include="$(AsyncEntryAttributePath)" Visible="false" />

    <!-- Make sure the source file is embedded in PDB to support Source Link -->
    <EmbeddedFiles Condition="'$(DebugType)' != 'none'" Include="$(AsyncEntryAttributePath)" />
  </ItemGroup>

</Project>
